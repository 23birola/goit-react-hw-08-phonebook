{"version":3,"sources":["redux/auth/auth-slice.js","redux/store/store.js","redux/auth/auth-selectors.js","components/AuthNav/AuthNav.jsx","components/UserMenu/UserMenu.jsx","components/Navigation/Navigation.jsx","components/AuthBar/AuthBar.jsx","components/PublicRoute.jsx","components/PrivateRoute.jsx","components/Loader/Loader.jsx","App.js","reportWebVitals.js","index.js","redux/auth/auth-operations.js","redux/contacts/contacts-operations.js","components/Navigation/Navigation.module.css","components/AuthNav/AuthNav.module.css","components/UserMenu/UserMenu.module.css","components/Loader/Loader.module.css","redux/contacts/contacts-slice.js","components/AuthBar/AuthBar.module.css","App.module.css"],"names":["authSlice","createSlice","name","initialState","user","email","token","isLoggedIn","extraReducers","authOperations","register","fulfilled","state","action","payload","logIn","logOut","fetchCurrentUser","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","auth","persistReducer","authReducer","contacts","contactsReducer","devTools","process","persistor","persistStore","authSelectors","getIsLoggedIn","getUsername","getUseremail","AuthNav","to","exact","className","css","link","activeClassName","activeLink","UserMenu","dispatch","useDispatch","useSelector","container","userEmail","Button","variant","size","color","type","onClick","Navigation","navigation","AppBar","header","PublicRoute","children","restricted","redirectTo","routeProps","shouldRedirect","PrivateRoute","LoaderSpinner","spinnerWraper","spinner","height","width","HomeView","lazy","SignUpView","LoginView","ContactsView","App","useEffect","fallback","Loader","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","loading","document","getElementById","axios","defaults","baseURL","headers","common","Authorization","createAsyncThunk","credentials","a","rejectWithValue","post","data","toast","message","_","thunkAPI","getState","persistedToken","get","fetchContacts","result","error","addContact","contact","deleteContact","id","delete","module","exports","ItemsSlice","items","filter","status","reducers","filterContacts","pending","rejected","push","actions"],"mappings":"kRAmCeA,EA1BGC,YAAY,CAC5BC,KAAM,OACNC,aARmB,CACnBC,KAAM,CAAEF,KAAM,KAAMG,MAAO,MAC3BC,MAAO,KACPC,YAAY,GAMZC,eAAa,mBACVC,IAAeC,SAASC,WADd,SACyBC,EAAOC,GACzCD,EAAMR,KAAOS,EAAOC,QAAQV,KAC5BQ,EAAMN,MAAQO,EAAOC,QAAQR,MAC7BM,EAAML,YAAa,KAJV,cAMVE,IAAeM,MAAMJ,WANX,SAMsBC,EAAOC,GACtCD,EAAMR,KAAOS,EAAOC,QAAQV,KAC5BQ,EAAMN,MAAQO,EAAOC,QAAQR,MAC7BM,EAAML,YAAa,KATV,cAWVE,IAAeO,OAAOL,WAXZ,SAWuBC,EAAOC,GACvCD,EAAMR,KAAO,CAAEF,KAAM,KAAMG,MAAO,MAClCO,EAAMN,MAAQ,KACdM,EAAML,YAAa,KAdV,cAgBVE,IAAeQ,iBAAiBN,WAhBtB,SAgBiCC,EAAOC,GACjDD,EAAMR,KAAOS,EAAOC,QACpBF,EAAML,YAAa,KAlBV,KAuBf,Q,yBCpBMW,EAAU,YACXC,YAAqB,CACtBC,kBAAmB,CACjBC,eAAgB,CAACC,IAAOC,IAAWC,IAAOC,IAASC,IAAOC,SAK1DC,EAAoB,CACxBC,IAAK,OACLC,YACAC,UAAW,CAAC,UAGDC,EAAQC,YAAe,CAClCC,QAAS,CACPC,KAAMC,YAAeR,EAAmBS,GAExCC,SAAUC,KAEZrB,aACAsB,UAAUC,IAGCC,EAAYC,YAAaX,G,gBC5BvBY,EALO,CACpBC,cAPoB,SAAAjC,GAAK,OAAIA,EAAMuB,KAAK5B,YAQxCuC,YANkB,SAAAlC,GAAK,OAAIA,EAAMuB,KAAK/B,KAAKF,MAO3C6C,aALmB,SAAAnC,GAAK,OAAIA,EAAMuB,KAAK/B,KAAKC,Q,wBCD/B,SAAS2C,IACtB,OACE,gCACE,cAAC,IAAD,CACEC,GAAG,YACHC,OAAK,EACLC,UAAWC,IAAIC,KACfC,gBAAiBF,IAAIG,WAJvB,qBAQA,cAAC,IAAD,CACEN,GAAG,SACHC,OAAK,EACLC,UAAWC,IAAIC,KACfC,gBAAiBF,IAAIG,WAJvB,uB,+CCNS,SAASC,IACtB,IAAMC,EAAWC,cACXrD,EAAQsD,YAAYf,EAAcG,cAExC,OACE,sBAAKI,UAAWC,IAAIQ,UAApB,UACE,cAAC,IAAD,CAAkB,aAAW,WAC7B,sBAAMT,UAAWC,IAAIS,UAArB,SAAiCxD,IACjC,cAACyD,EAAA,EAAD,CAAQC,QAAQ,YAAYC,KAAK,QAAQC,MAAM,UAAUC,KAAK,SAASC,QAAS,kBAAMV,EAAShD,IAAeO,WAA9G,uB,qBCOSoD,EApBI,kBACjB,sBAAKjB,UAAWC,IAAIiB,WAApB,UACE,cAAC,IAAD,CAASpB,GAAG,IAAIC,OAAK,EACnBC,UAAWC,IAAIC,KACfC,gBAAiBF,IAAIG,WAFvB,kBAOA,cAAC,IAAD,CACEN,GAAG,YACHC,OAAK,EACLC,UAAWC,IAAIC,KACfC,gBAAiBF,IAAIG,WAJvB,2B,iBCLW,SAASe,IACxB,IAAM/D,EAAaoD,YAAYf,EAAcC,eAC3C,OACE,yBAAQM,UAAWC,IAAImB,OAAvB,UACE,cAAC,EAAD,IACChE,EAAa,cAACiD,EAAD,IAAe,cAACR,EAAD,O,8ECQpBwB,EAhBK,SAAC,GAKd,IAJLC,EAII,EAJJA,SAII,IAHJC,kBAGI,aAFJC,kBAEI,MAFS,IAET,EADDC,EACC,iBAEEC,EADalB,YAAYf,EAAcC,gBACR6B,EAErC,OACE,cAAC,IAAD,2BAAWE,GAAX,aACGC,EAAiB,cAAC,IAAD,CAAU5B,GAAI0B,IAAiBF,M,4BCDxCK,EAVM,SAAC,GAAwD,IAAtDL,EAAqD,EAArDA,SAAqD,IAA3CE,kBAA2C,MAA9B,SAA8B,EAAjBC,EAAiB,iBACrErE,EAAaoD,YAAYf,EAAcC,eAE7C,OACE,cAAC,IAAD,2BAAW+B,GAAX,aACGrE,EAAakE,EAAW,cAAC,IAAD,CAAUxB,GAAI0B,Q,kCCM9BI,GAZO,WAClB,OACI,qBAAK5B,UAAWC,IAAI4B,cAApB,SAAmC,cAAC,IAAD,CAAQ7B,UAAWC,IAAI6B,QACtDf,KAAK,OACLD,MAAM,UACNiB,OAAQ,GACRC,MAAO,QCGbC,GAAWC,gBAAK,kBACpB,iCAEIC,GAAaD,gBAAK,kBACtB,uDAEIE,GAAYF,gBAAK,kBACrB,uDAEIG,GAAeH,gBAAK,kBACxB,uDAKa,SAASI,KACtB,IAAMhC,EAAWC,cAMjB,OAJAgC,qBAAU,WACRjC,EAAShD,IAAeQ,sBACvB,CAACwC,IAGF,sBAAKN,UAAWC,IAAIQ,UAApB,UACE,cAAC,EAAD,IAEA,cAAC,IAAD,UACE,eAAC,WAAD,CAAU+B,SAAU,cAACC,GAAD,IAApB,UACE,cAAC,EAAD,CAAa1C,OAAK,EAAC2C,KAAK,IAAxB,SACE,cAACT,GAAD,MAEF,eAAC,EAAD,CAAaS,KAAK,YAAYnB,YAAU,EAACC,WAAW,YAApD,UACE,cAACW,GAAD,IAAe,OAEjB,eAAC,EAAD,CAAaO,KAAK,SAASnB,YAAU,EAACC,WAAW,YAAjD,UACE,cAACY,GAAD,IAAc,OAEhB,cAAC,EAAD,CAAcM,KAAM,YAAalB,WAAW,SAA5C,SACE,cAACa,GAAD,cClDZ,IAYeM,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCGdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,CAAUzE,MAAOA,EAAjB,SACE,cAAC,IAAD,CAAa0E,QAAS,KAAMhE,UAAWA,EAAvC,SACE,cAAC,IAAD,UACE,cAAC+C,GAAD,YAKRkB,SAASC,eAAe,SAM1Bd,M,6FCtBAe,IAAMC,SAASC,QAAU,wCAEzB,IAAMzG,EAAQ,SACRA,GACFuG,IAAMC,SAASE,QAAQC,OAAOC,cAA9B,iBAAwD5G,IAFtDA,EAAQ,WAKVuG,IAAMC,SAASE,QAAQC,OAAOC,cAAgB,IAI5CxG,EAAWyG,YAAiB,gBAAD,uCAAkB,WAAOC,EAAP,sBAAAC,EAAA,6DAAsBC,EAAtB,EAAsBA,gBAAtB,kBAExBT,IAAMU,KAAK,gBAAiBH,GAFJ,uBAEvCI,EAFuC,EAEvCA,KACRlH,EAAUkH,EAAKlH,OAHgC,kBAIxCkH,GAJwC,yCAM/CC,YAAM,wBANyC,kBAOxCH,EAAgB,KAAMI,UAPkB,0DAAlB,yDAU3B3G,EAAQoG,YAAiB,aAAD,uCAAe,WAAOC,EAAP,sBAAAC,EAAA,6DAAsBC,EAAtB,EAAsBA,gBAAtB,kBAElBT,IAAMU,KAAK,eAAgBH,GAFT,uBAEjCI,EAFiC,EAEjCA,KACRlH,EAAUkH,EAAKlH,OAH0B,kBAIlCkH,GAJkC,yCAMzCC,YAAM,wBANmC,kBAOlCH,EAAgB,KAAMI,UAPY,0DAAf,yDAkDxBjH,EAAiB,CACrBC,WACAM,OAzCamG,YAAiB,cAAD,uCAAgB,WAAOQ,EAAP,kBAAAN,EAAA,6DAAYC,EAAZ,EAAYA,gBAAZ,kBAErCT,IAAMU,KAAK,iBAF0B,OAG3CjH,IAH2C,uDAK3CmH,YAAM,wBALqC,kBAMpCH,EAAgB,KAAMI,UANc,yDAAhB,yDA0C7B3G,QACAE,iBAzBuBkG,YACvB,eADuC,uCAEvC,WAAOQ,EAAGC,GAAV,qBAAAP,EAAA,yDACQzG,EAAQgH,EAASC,WAGA,QAFjBC,EAAiBlH,EAAMuB,KAAK7B,OAFpC,yCAKWsH,EAASN,mBALpB,cAQEhH,EAAUwH,GARZ,kBAU2BjB,IAAMkB,IAAI,kBAVrC,uBAUYP,EAVZ,EAUYA,KAVZ,kBAWWA,GAXX,yCAaIC,YAAM,wBAbV,kBAcWG,EAASN,gBAAgB,KAAMI,UAd1C,0DAFuC,0DA2B1BjH,O,mMC7EFuH,EAAgBb,YAC3B,yBAD2C,uCAE3C,WAAOQ,EAAP,oBAAAN,EAAA,6DAAYC,EAAZ,EAAYA,gBAAZ,kBAEyBT,IAAMkB,IAAI,aAFnC,cAEUE,EAFV,yBAGWA,EAAOT,MAHlB,uCAKIC,IAAMS,MAAM,wBALhB,kBAMWZ,EAAgB,KAAMI,UANjC,yDAF2C,yDAahCS,EAAahB,YACxB,sBADwC,uCAExC,WAAOiB,EAAP,oBAAAf,EAAA,6DAAkBC,EAAlB,EAAkBA,gBAAlB,kBAEyBT,IAAMU,KAAK,YAAaa,GAFjD,cAEUH,EAFV,yBAGWA,EAAOT,MAHlB,uCAKIC,IAAMS,MAAM,wBALhB,kBAMWZ,EAAgB,KAAMI,UANjC,yDAFwC,yDAa7BW,EAAgBlB,YAC3B,yBAD2C,uCAE3C,WAAOmB,EAAP,kBAAAjB,EAAA,6DAAaC,EAAb,EAAaA,gBAAb,kBAEUT,IAAM0B,OAAN,oBAA0BD,IAFpC,gCAGWA,GAHX,uCAKIb,IAAMS,MAAM,wBALhB,kBAMWZ,EAAgB,KAAMI,UANjC,yDAF2C,0D,mBC7B7Cc,EAAOC,QAAU,CAAC,WAAa,+BAA+B,KAAO,yBAAyB,WAAa,iC,mBCA3GD,EAAOC,QAAU,CAAC,KAAO,sBAAsB,WAAa,8B,mBCA5DD,EAAOC,QAAU,CAAC,UAAY,4BAA4B,UAAY,8B,mBCAtED,EAAOC,QAAU,CAAC,cAAgB,gC,8FCM5BC,EAAazI,YAAY,CAC7BC,KAAM,WACNC,aAAc,CACZwI,MAAO,GACPC,OAAQ,GACRC,OAAQ,KACRX,MAAO,MAGTY,SAAU,CACRC,eAAgB,SAACnI,EAAOC,GACtBD,EAAMgI,OAAS/H,EAAOC,UAI1BN,eAAa,mBACVwH,IAAcrH,WAAY,SAACC,EAAOC,GACjCD,EAAM+H,MAAQ9H,EAAOC,QACrBF,EAAMiI,OAAS,KACfjI,EAAMsH,MAAQ,QAJL,cAMVF,IAAcgB,SAAU,SAACpI,EAAO+G,GAC/B/G,EAAMiI,OAAS,aAPN,cASVb,IAAciB,UAAW,SAACrI,EAAO+G,GAChC/G,EAAMiI,OAAS,KACfjI,EAAMsH,MAAQ,WAXL,cAcVC,IAAWxH,WAAY,SAACC,EAAOC,GAC9BD,EAAM+H,MAAMO,KAAKrI,EAAOC,SACxBF,EAAMiI,OAAS,KACfjI,EAAMsH,MAAQ,QAjBL,cAmBVC,IAAWa,SAAU,SAACpI,EAAO+G,GAC5B/G,EAAMiI,OAAS,UACfjI,EAAMsH,MAAQ,QArBL,cAuBVC,IAAWc,UAAW,SAACrI,EAAO+G,GAC7B/G,EAAMiI,OAAS,KACfjI,EAAMsH,MAAQ,WAzBL,cA2BVG,IAAc1H,WAAY,SAACC,EAAOC,GACjCD,EAAM+H,MAAQ/H,EAAM+H,MAAMC,QACxB,SAAAR,GAAO,OAAIA,EAAQE,KAAOzH,EAAOC,cA7B1B,KAmCAiI,EAAmBL,EAAWS,QAA9BJ,eACAL,MAAf,S,mBCzDAF,EAAOC,QAAU,CAAC,OAAS,0B,mBCA3BD,EAAOC,QAAU,CAAC,UAAY,0B","file":"static/js/main.280fbd91.chunk.js","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nimport authOperations from './auth-operations';\r\n\r\nconst initialState = {\r\n  user: { name: null, email: null },\r\n  token: null,\r\n  isLoggedIn: false,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  extraReducers: {\r\n    [authOperations.register.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logIn.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logOut.fulfilled](state, action) {\r\n      state.user = { name: null, email: null };\r\n      state.token = null;\r\n      state.isLoggedIn = false;\r\n    },\r\n    [authOperations.fetchCurrentUser.fulfilled](state, action) {\r\n      state.user = action.payload;\r\n      state.isLoggedIn = true;\r\n    },\r\n  },\r\n});\r\n\r\nexport default authSlice.reducer;\r\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\nimport contactsReducer from '../contacts/contacts-slice';\nimport authReducer from '../auth/auth-slice';\nimport {\n  persistStore,\n  persistReducer,\n  FLUSH,\n  REHYDRATE,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER,\n} from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\n\nconst middleware = [\n  ...getDefaultMiddleware({\n    serializableCheck: {\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n    },\n  }),\n];\n\nconst authPersistConfig = {\n  key: 'auth',\n  storage,\n  whitelist: ['token'],\n};\n\nexport const store = configureStore({\n  reducer: {\n    auth: persistReducer(authPersistConfig, authReducer),\n    // auth: authReducer,\n    contacts: contactsReducer,\n  },\n  middleware,\n  devTools: process.env.NODE_ENV !== 'production',\n});\n\nexport const persistor = persistStore(store);\n","const getIsLoggedIn = state => state.auth.isLoggedIn;\r\n\r\nconst getUsername = state => state.auth.user.name;\r\n\r\nconst getUseremail = state => state.auth.user.email;\r\n\r\nconst authSelectors = {\r\n  getIsLoggedIn,\r\n  getUsername,\r\n  getUseremail,\r\n};\r\nexport default authSelectors;\r\n","import { NavLink } from 'react-router-dom';\r\nimport css from './AuthNav.module.css';\r\n\r\nexport default function AuthNav() {\r\n  return (\r\n    <div>\r\n      <NavLink\r\n        to=\"/register\"\r\n        exact\r\n        className={css.link}\r\n        activeClassName={css.activeLink}\r\n      >\r\n        Sign up\r\n      </NavLink>\r\n      <NavLink\r\n        to=\"/login\"\r\n        exact\r\n        className={css.link}\r\n        activeClassName={css.activeLink}\r\n      >\r\n        Log in\r\n      </NavLink>\r\n    </div>\r\n  );\r\n}","import { useDispatch, useSelector } from 'react-redux';\r\nimport authSelectors from '../../redux/auth/auth-selectors';\r\nimport authOperations from '../../redux/auth/auth-operations';\r\nimport { Button } from '@material-ui/core';\r\nimport PermIdentityIcon from '@material-ui/icons/PermIdentity';\r\nimport css from './UserMenu.module.css'\r\n\r\n\r\nexport default function UserMenu() {\r\n  const dispatch = useDispatch();\r\n  const email = useSelector(authSelectors.getUseremail);\r\n\r\n  return (\r\n    <div className={css.container}>\r\n      <PermIdentityIcon aria-label=\"delete\"/>\r\n      <span className={css.userEmail}>{email}</span>\r\n      <Button variant=\"contained\" size=\"small\" color=\"primary\" type=\"button\" onClick={() => dispatch(authOperations.logOut())}>\r\n        LogOut\r\n      </Button>\r\n    </div>\r\n  );\r\n}","import { NavLink } from 'react-router-dom';\r\nimport css from './Navigation.module.css'\r\n\r\nconst Navigation = () => (\r\n  <nav className={css.navigation}>\r\n    <NavLink to=\"/\" exact\r\n      className={css.link}\r\n      activeClassName={css.activeLink}\r\n    >\r\n      Home\r\n    </NavLink>\r\n\r\n    <NavLink\r\n      to=\"/contacts\"\r\n      exact\r\n      className={css.link}\r\n      activeClassName={css.activeLink}\r\n    >\r\n      Contactcs\r\n    </NavLink>\r\n  </nav>\r\n);\r\n\r\nexport default Navigation;","import { useSelector } from \"react-redux\";\r\nimport authSelectors from \"../../redux/auth/auth-selectors\";\r\nimport AuthNav from \"../AuthNav/AuthNav\";\r\nimport UserMenu from \"../UserMenu/UserMenu\";\r\nimport Navigation from \"../Navigation/Navigation\"\r\nimport css from \"./AuthBar.module.css\";\r\n\r\nexport default function AppBar() {\r\nconst isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <header className={css.header}>\r\n      <Navigation />\r\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n    </header>\r\n  );\r\n}","import { useSelector } from \"react-redux\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\nimport authSelectors from '../redux/auth/auth-selectors';\r\n\r\nconst PublicRoute = ({\r\n  children,\r\n  restricted = false,\r\n  redirectTo = \"/\",\r\n  ...routeProps\r\n}) => {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  const shouldRedirect = isLoggedIn && restricted;\r\n\r\n  return (\r\n    <Route {...routeProps}>\r\n      {shouldRedirect ? <Redirect to={redirectTo} /> : children}\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default PublicRoute;","import { useSelector } from \"react-redux\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\nimport  authSelectors  from '../redux/auth/auth-selectors';\r\n\r\nconst PrivateRoute = ({ children, redirectTo = \"/login\", ...routeProps }) => {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n\r\n  return (\r\n    <Route {...routeProps}>\r\n      {isLoggedIn ? children : <Redirect to={redirectTo} />}\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default PrivateRoute;","import Loader from \"react-loader-spinner\";\r\nimport css from \"./Loader.module.css\"\r\n\r\nconst LoaderSpinner = () => {\r\n    return (\r\n        <div className={css.spinnerWraper}><Loader className={css.spinner}\r\n            type=\"Oval\"\r\n            color=\"#3f51b5\"\r\n            height={50}\r\n            width={50}\r\n        />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LoaderSpinner;","import { Switch } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport AuthBar from './components/AuthBar/AuthBar';\r\nimport css from './App.module.css';\r\nimport { lazy, Suspense, useEffect } from 'react';\r\nimport authOperations from './redux/auth/auth-operations';\r\nimport PublicRoute from './components/PublicRoute';\r\nimport PrivateRoute from './components/PrivateRoute';\r\nimport LoaderSpinner from './components/Loader/Loader';\r\n\r\n\r\nconst HomeView = lazy(() =>\r\n  import('./views/HomeView/HomeView' /* webpackChunkName: \"HomePage\" */),\r\n);\r\nconst SignUpView = lazy(() =>\r\n  import('./views/SignUpView/SignUpView' /* webpackChunkName: \"SignUpPage\" */),\r\n);\r\nconst LoginView = lazy(() =>\r\n  import('./views/LoginView/LoginView' /* webpackChunkName: \"LoginPage\" */),\r\n);\r\nconst ContactsView = lazy(() =>\r\n  import(\r\n    './views/ContactsView/ContactsView' /* webpackChunkName: \"ContactsPage\" */\r\n  ),\r\n);\r\n\r\nexport default function App() {\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(authOperations.fetchCurrentUser());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <div className={css.container}>\r\n      <AuthBar />\r\n\r\n      <Switch>\r\n        <Suspense fallback={<LoaderSpinner/> }>\r\n          <PublicRoute exact path=\"/\">\r\n            <HomeView />\r\n          </PublicRoute>\r\n          <PublicRoute path=\"/register\" restricted redirectTo=\"/contacts\">\r\n            <SignUpView />{' '}\r\n          </PublicRoute>\r\n          <PublicRoute path=\"/login\" restricted redirectTo=\"/contacts\">\r\n            <LoginView />{' '}\r\n          </PublicRoute>\r\n          <PrivateRoute path={'/contacts'} redirectTo=\"/login\">\r\n            <ContactsView />\r\n          </PrivateRoute>\r\n        </Suspense>\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport { store, persistor } from './redux/store/store';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import axios from 'axios';\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport toast from 'react-hot-toast';\r\n\r\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\r\n\r\nconst token = {\r\n  set(token) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n  unset() {\r\n    axios.defaults.headers.common.Authorization = '';\r\n  },\r\n};\r\n\r\nconst register = createAsyncThunk('auth/register', async (credentials, { rejectWithValue }) => {\r\n  try {\r\n    const { data } = await axios.post('/users/signup', credentials);\r\n    token.set(data.token);\r\n    return data;\r\n  } catch (error) {\r\n    toast('Something went wrong');\r\n    return rejectWithValue(error.message);  }\r\n});\r\n\r\nconst logIn = createAsyncThunk('auth/login', async (credentials, { rejectWithValue }) => {\r\n  try {\r\n    const { data } = await axios.post('/users/login', credentials);\r\n    token.set(data.token);\r\n    return data;\r\n  } catch (error) {\r\n    toast('Something went wrong');\r\n    return rejectWithValue(error.message); \r\n  }\r\n});\r\n\r\nconst logOut = createAsyncThunk('auth/logout', async (_, { rejectWithValue }) => {\r\n  try {\r\n    await axios.post('/users/logout');\r\n    token.unset();\r\n  } catch (error) {\r\n    toast('Something went wrong');\r\n    return rejectWithValue(error.message); \r\n  }\r\n});\r\n/*\r\n * GET @ /users/current\r\n * headers:\r\n *    Authorization: Bearer token\r\n *\r\n * 1. Забираем токен из стейта через getState()\r\n * 2. Если токена нет, выходим не выполняя никаких операций\r\n * 3. Если токен есть, добавляет его в HTTP-заголовок и выполянем операцию\r\n */\r\nconst fetchCurrentUser = createAsyncThunk(\r\n  'auth/refresh',\r\n  async (_, thunkAPI) => {\r\n    const state = thunkAPI.getState();\r\n    const persistedToken = state.auth.token;\r\n\r\n    if (persistedToken === null) {\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n\r\n    token.set(persistedToken);\r\n    try {\r\n      const { data } = await axios.get('/users/current');\r\n      return data;\r\n    } catch (error) {\r\n      toast('Something went wrong');\r\n      return thunkAPI.rejectWithValue(error.message); \r\n    }\r\n  },\r\n);\r\n\r\nconst authOperations = {\r\n  register,\r\n  logOut,\r\n  logIn,\r\n  fetchCurrentUser,\r\n};\r\nexport default authOperations;\r\n","import { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\nimport toast from 'react-hot-toast';\r\n\r\nexport const fetchContacts = createAsyncThunk(\r\n  'contacts/fetchContacts',\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      const result = await axios.get('/contacts');\r\n      return result.data;\r\n    } catch (error) {\r\n      toast.error('Something went wrong');\r\n      return rejectWithValue(error.message);\r\n    }\r\n  },\r\n);\r\n\r\nexport const addContact = createAsyncThunk(\r\n  'contacts/addContact',\r\n  async (contact, { rejectWithValue }) => {\r\n    try {\r\n      const result = await axios.post('/contacts', contact);\r\n      return result.data;\r\n    } catch (error) {\r\n      toast.error('Something went wrong');\r\n      return rejectWithValue(error.message);\r\n    }\r\n  },\r\n);\r\n\r\nexport const deleteContact = createAsyncThunk(\r\n  'contacts/deleteContact',\r\n  async (id, { rejectWithValue }) => {\r\n    try {\r\n      await axios.delete(`/contacts/${id}`);\r\n      return id;\r\n    } catch (error) {\r\n      toast.error('Something went wrong');\r\n      return rejectWithValue(error.message);\r\n    }\r\n  },\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navigation\":\"Navigation_navigation__1SS6m\",\"link\":\"Navigation_link__2T24D\",\"activeLink\":\"Navigation_activeLink__1UYet\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"AuthNav_link__3K7Gd\",\"activeLink\":\"AuthNav_activeLink__3eWD0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"UserMenu_container__2qV5T\",\"userEmail\":\"UserMenu_userEmail__1RyZ0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinnerWraper\":\"Loader_spinnerWraper__2Q-In\"};","import { createSlice } from '@reduxjs/toolkit';\r\nimport {\r\n  fetchContacts,\r\n  addContact,\r\n  deleteContact,\r\n} from './contacts-operations';\r\n\r\nconst ItemsSlice = createSlice({\r\n  name: 'contacts',\r\n  initialState: {\r\n    items: [],\r\n    filter: '',\r\n    status: null,\r\n    error: null,\r\n  },\r\n\r\n  reducers: {\r\n    filterContacts: (state, action) => {\r\n      state.filter = action.payload;\r\n    },\r\n  },\r\n\r\n  extraReducers: {\r\n    [fetchContacts.fulfilled]: (state, action) => {\r\n      state.items = action.payload;\r\n      state.status = null;\r\n      state.error = null;\r\n    },\r\n    [fetchContacts.pending]: (state, _) => {\r\n      state.status = 'loading';\r\n    },\r\n    [fetchContacts.rejected]: (state, _) => {\r\n      state.status = null;\r\n      state.error = 'Error';\r\n    },\r\n\r\n    [addContact.fulfilled]: (state, action) => {\r\n      state.items.push(action.payload);\r\n      state.status = null;\r\n      state.error = null;\r\n    },\r\n    [addContact.pending]: (state, _) => {\r\n      state.status = 'loading';\r\n      state.error = null;\r\n    },\r\n    [addContact.rejected]: (state, _) => {\r\n      state.status = null;\r\n      state.error = 'Error';\r\n    },\r\n    [deleteContact.fulfilled]: (state, action) => {\r\n      state.items = state.items.filter(\r\n        contact => contact.id !== action.payload,\r\n      );\r\n    },\r\n  },\r\n});\r\n\r\nexport const { filterContacts } = ItemsSlice.actions;\r\nexport default ItemsSlice.reducer;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AuthBar_header__gosE-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__3x7yO\"};"],"sourceRoot":""}